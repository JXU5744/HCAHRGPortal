@model HCAaudit.Service.Portal.AuditUI.ViewModel.AuditViewModel
@{
    ViewData["Title"] = "Home Page";
}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
@*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">*@
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" rel="stylesheet" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />

<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    * {
        box-sizing: border-box;
    }

    #myInput {
        background-image: url('/css/searchicon.png');
        background-position: 10px 12px;
        background-repeat: no-repeat;
        width: 100%;
        font-size: 16px;
        padding: 12px 20px 12px 40px;
        border: 1px solid #ddd;
        margin-bottom: 12px;
    }

    #myUL {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

        #myUL li a {
            border: 1px solid #ddd;
            margin-top: -1px; /* Prevent double borders */
            background-color: #f6f6f6;
            padding: 12px;
            text-decoration: none;
            font-size: 18px;
            color: black;
            display: block
        }

            #myUL li a:hover:not(.header) {
                background-color: #eee;
            }

    textarea {
        overflow-y: scroll;
        height: 100px;
        resize: none; /* Remove this if you want the user to resize the textarea */
    }
</style>
<form id="AuditDetails" method="post" asp-controller="Audit" asp-action="SaveAudit">
    <div>
        <div class="card">
            <div class="row">
                <div class="col">
                    <label for="format-pdf" class="input-group">Ticket ID</label>
                    @Html.TextBoxFor(m => m.TicketId, new { @disabled = true })
                </div>
                <div class="col">
                    <label for="format-pdf" class="input-group">Agent's 3-4 ID</label>
                    @Html.TextBoxFor(m => m.Agent34Id, new { @disabled = true })
                </div>
                <div class="col">
                    <label for="format-pdf" class="input-group" ">Agent Name</label>
                    @Html.TextBoxFor(m => m.AgentName, new { @disabled = true })
                </div>
                <div class="col">
                    <label for="format-pdf" class="input-group" ">Date of Auditor</label>
                    @Html.TextBoxFor(m => m.TicketDate, new { @disabled = true })
                </div>
               </div>
                <div class="row">
                    <div class="col">
                        <label for="format-pdf" class="input-group" ">Supervisor</label>
                        @Html.TextBoxFor(m => m.SupervisorName, new { @disabled = true })
                    </div>
                    <div class="col">
                        <label for="format-pdf" class="input-group">Service Group</label>
                        @Html.TextBoxFor(m => m.ServiceGroupName, new { @disabled = true })
                    </div>
                    <div class="col">
                        <label for="format-pdf" class="input-group">Sub Group</label>
                        @Html.TextBoxFor(m => m.SubCatName, new { @disabled = true })
                    </div>
                </div>
                <div class="row"><hr /></div>
                <div ">
                    <table id="auditDetails" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th style="width:5%">Question No</th>
                                <th style="width:30%">Question Desc</th>
                                <th style="width:40%">Action</th>
                                <th style="width:10%">Correction Required</th>
                                <th style="width:15%">Comment</th>
                            </tr>

                        </thead>
                        @for (int i = 0; i < Model.Question.Count; i++)
                        {
                            <tr>
                                <td>
                                    <div>
                                        @Model.Question[i].QuestionSequence
                                        @Html.HiddenFor(m => m.Question[i].QuestionId)
                                        @Html.HiddenFor(m => m.Question[i].QuestionName)
                                    </div>
                                </td>
                                <td>
                                    @Html.TextAreaFor(m => m.Question[i].QuestionName, new { style = "height:50%;width:100%", @disabled = true })
                                </td>
                                <td>
                                    <div id="action">
                                        <table width="100%">
                                            <tr style=" border: 1px solid #ddd">
                                                <td style=" border-right: 1px solid #ddd">
                                                    <div>
                                                        @Html.CheckBoxFor(m => m.Question[i].Action.IsCompliance, new { id = Model.Question[i].QuestionId + "-compliance", @class = "actioncheck", title = Model.Question[i].QuestionId + "-action" }) <label>Compliance</label>
                                                        @*<label style="white-space:nowrap"><input type="checkbox" class="actioncheck" value="@Model.Question[i].Action.Compliance" name='@Model.Question[i].QuestionId-Action' @(Model.Question[i].Action.Compliance == true ? "checked" : "") />Compliance</label>*@
                                                    </div>
                                                </td>
                                                <td style=" border-right: 1px solid #ddd">
                                                    @Html.CheckBoxFor(m => m.Question[i].Action.IsNonCompliance, new { id = Model.Question[i].QuestionId + "-noncompliance", @class = "actioncheck", title = Model.Question[i].QuestionId + "-action" }) <label>Non Compliance</label>
                                                    @*<label style="white-space:nowrap;padding-right:3%"> <input type="checkbox" id="nonCompliance" class="actioncheck" value="@Model.Question[i].Action.NonCompliance" name='@Model.Question[i].QuestionId-Action' />Non Compliance</label>*@
                                                    <br />
                                                    <table width="100%" style="border: 1px solid #ddd;display:none" id="@Model.Question[i].QuestionId-tblNonCompliance">
                                                        <tr>
                                                            <td style=" border-right: 1px solid #ddd">
                                                                @Html.CheckBoxFor(m => m.Question[i].Action.Impact.IsHighImpact, new { id = Model.Question[i].QuestionId + "-Impact", @class = "chkimpact", title = Model.Question[i].QuestionId + "-Impact" }) <label>High</label>

                                                            </td>
                                                            <td>
                                                                @Html.CheckBoxFor(m => m.Question[i].Action.Impact.IsLowImpact, new { id = Model.Question[i].QuestionId + "-Impact", @class = "chkimpact", title = Model.Question[i].QuestionId + "-Impact" }) <label>Low</label>

                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                                <td>
                                                    @Html.CheckBoxFor(m => m.Question[i].Action.IsNotApplicable, new { id = Model.Question[i].QuestionId + "-notapplicable", @class = "actioncheck", title = Model.Question[i].QuestionId + "-action" }) <label>Not Applicable</label>
                                                    @*<label style="white-space:nowrap;padding-right:3%"><input type="checkbox" class="actioncheck" value="@Model.Question[i].Action.NotApplicable" name='@Model.Question[i].QuestionId-Action' />Not Applicable</label>*@
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </td>
                                <td> <input type="checkbox" class="radio-primary" value="Correction Required" name="optradio" /></td>
                                <td>@Html.TextAreaFor(m => m.Question[i].Comments, new { style = "height:50%" })</td>

                            </tr>
                        }
                    </table>
                </div>
            </div>

        <div class="row"></div>
        <div class="form-group">
            <label for="auditnotes" class="text-primary">Audit Notes:</label>

            @Html.TextAreaFor(m=>m.AuditNote, new { rows = "4", style = "width:100%" } )
        <div class="row">
            <div class="col">
                @*<button id="btnAnswerNo" class="btn btn-primary">
                    Return to Toolbox (Will NOT Submit Audit)
                </button>*@
            </div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col">
                <button id="btnAnswerYes" class="btn btn-success">
                    Submit Audit
                </button>
            </div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col"></div>
            <div class="col">

            </div>
        </div>
    </div>
</form>

    <!-- Script for the date range picker -->
    <script type="text/javascript" src="~/js/daterangepicker.js"></script>
    <link rel="stylesheet"
          type="text/css"
          href="~/css/daterangepicker.css" />
    <!-- Script for the date range picker -->
<script type="text/javascript">
    $('.actioncheck').click(function ()
    {
        debugger;
        var name = $(this).attr("id");
        var questionId = name.substring(0, name.indexOf("-"));
        $('[title=' + questionId +'-action'+ ']').not(this).prop('checked', false);
        if ($("#" + questionId + "-noncompliance").prop('checked') == true)
        {
            $("#" + questionId +"-tblNonCompliance").show();
        }
        else
        {
            $("#" + questionId + "-tblNonCompliance").hide();
            $("#" + questionId + "-Impact").prop('checked', false);
        }
    });
    $('.chkimpact').click(function () {
        var name = $(this).attr("id");
        var questionId = name.substring(0, name.indexOf("-"));
        $('[title=' + questionId + '-Impact' + ']').not(this).prop('checked', false);

    });
</script>